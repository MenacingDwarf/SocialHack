<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<style>
#chartdiv {
  width: 400px;
  height: 500px;
  margin: 10%;
}
#chartdiv_1 {
  width: 400px;
  height: 500px;
  margin: 10%;
}
</style>

<body>

<h1>Страница студента</h1>

<table class="table table-bordered">
  <thead>
    <tr>
      <th scope="col">Attendance</th>
      <th scope="col">Correctness</th>
      <th scope="col">Department</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><div id="chartdiv"></div></td>
      <td><div id="chartdiv_1"></div></td>
      <td><div id="chartdiv"></div></td>
    </tr>
  </tbody>
</table>

</body>

<!-- Resources -->
<script src="https://www.amcharts.com/lib/4/core.js"></script>
<script src="https://www.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

<!-- Chart code -->
<script>

var array = [];
var array_1 = [];
var courses = JSON.parse('{{ courses|safe }}');
var titles = JSON.parse('{{ titles|safe }}');
courses.forEach(function(item, i, courses) {
    array.push({"course_id": titles[item.course_id - 1], "attendance": item.attendance})
    array_1.push({"course_id": titles[item.course_id - 1], "correctness": item.correctness})
});

am4core.ready(function() {

// Themes begin
am4core.useTheme(am4themes_animated);
// Themes end

// Create chart instance
var chart = am4core.create("chartdiv", am4charts.XYChart);
chart.scrollbarX = new am4core.Scrollbar();

// Add data
chart.data = array;

// Create axes
var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
categoryAxis.dataFields.category = "course_id";
categoryAxis.renderer.grid.template.location = 0;
categoryAxis.renderer.minGridDistance = 10;
categoryAxis.renderer.labels.template.horizontalCenter = "middle";
categoryAxis.renderer.labels.template.verticalCenter = "middle";
categoryAxis.renderer.labels.template.rotation = 25;
categoryAxis.tooltip.disabled = true;
categoryAxis.renderer.minHeight = 10;
var valueAxis = new am4charts.ValueAxis();
valueAxis.min = 0;
valueAxis = chart.yAxes.push(valueAxis);

// Create series
var series = chart.series.push(new am4charts.ColumnSeries());
series.sequencedInterpolation = true;
series.dataFields.valueY = "attendance";
series.dataFields.categoryX = "course_id";
series.tooltipText = "[{categoryX}: bold]{valueY}[/]";
series.columns.template.strokeWidth = 0;

series.tooltip.pointerOrientation = "vertical";

series.columns.template.column.cornerRadiusTopLeft = 0;
series.columns.template.column.cornerRadiusTopRight = 10;
series.columns.template.column.fillOpacity = 0.8;

// on hover, make corner radiuses bigger
var hoverState = series.columns.template.column.states.create("hover");
hoverState.properties.cornerRadiusTopLeft = 0;
hoverState.properties.cornerRadiusTopRight = 0;
hoverState.properties.fillOpacity = 1;

series.columns.template.adapter.add("fill", function(fill, target) {
  return chart.colors.getIndex(target.dataItem.index);
});

// Cursor
chart.cursor = new am4charts.XYCursor();

}); // end am4core.ready()

am4core.ready(function() {

// Themes begin
am4core.useTheme(am4themes_animated);
// Themes end

// Create chart instance
var chart_1 = am4core.create("chartdiv_1", am4charts.XYChart);
chart_1.scrollbarX = new am4core.Scrollbar();

// Add data
chart_1.data = array_1;

// Create axes
var categoryAxis_1 = chart_1.xAxes.push(new am4charts.CategoryAxis());
categoryAxis_1.dataFields.category = "course_id";
categoryAxis_1.renderer.grid.template.location = 0;
categoryAxis_1.renderer.minGridDistance = 30;
categoryAxis_1.renderer.labels.template.horizontalCenter = "middle";
categoryAxis_1.renderer.labels.template.verticalCenter = "middle";
categoryAxis_1.renderer.labels.template.rotation = 25;
categoryAxis_1.tooltip.disabled = true;
categoryAxis_1.renderer.minHeight = 110;

var valueAxis_1 = new am4charts.ValueAxis();
valueAxis_1.min = 0;
valueAxis_1 = chart_1.yAxes.push(valueAxis_1);

// Create series
var series_1 = chart_1.series.push(new am4charts.ColumnSeries());
series_1.sequencedInterpolation = true;
series_1.dataFields.valueY = "correctness";
series_1.dataFields.categoryX = "course_id";
series_1.tooltipText = "[{categoryX}: bold]{valueY}[/]";
series_1.columns.template.strokeWidth = 0;

series_1.tooltip.pointerOrientation = "vertical";

series_1.columns.template.column.cornerRadiusTopLeft = 10;
series_1.columns.template.column.cornerRadiusTopRight = 10;
series_1.columns.template.column.fillOpacity = 0.8;

// on hover, make corner radiuses bigger
var hoverState_1 = series_1.columns.template.column.states.create("hover");
hoverState_1.properties.cornerRadiusTopLeft = 0;
hoverState_1.properties.cornerRadiusTopRight = 0;
hoverState_1.properties.fillOpacity = 1;

series_1.columns.template.adapter.add("fill", function(fill, target) {
  return chart_1.colors.getIndex(target.dataItem.index);
});

// Cursor
chart_1.cursor = new am4charts.XYCursor();

}); // end am4core.ready()

</script>

</html>